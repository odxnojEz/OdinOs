<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>BMI Calculator</title>
  <style>
    /* Simple responsive SPA layout */
    :root{
      --bg:#f6f8fa;
      --card:#ffffff;
      --accent:#4a90e2;
      --muted:#6b7280;
      --success:#16a34a;
      --warning:#f59e0b;
      --danger:#ef4444;
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;
      background: linear-gradient(180deg,#e6f2ff 0%,var(--bg) 60%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      color:#0f172a;
    }
    .container{
      width:100%;
      max-width:900px;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:20px;
      align-items:start;
    }
    @media (max-width:880px){
      .container{grid-template-columns:1fr}
    }

    .card{
      background:var(--card);
      border-radius:12px;
      padding:20px;
      box-shadow: 0 6px 18px rgba(12,18,36,0.08);
    }
    header h1{
      margin:0 0 8px 0;
      font-size:20px;
      letter-spacing:0.2px;
    }
    header p{
      margin:0 0 16px 0;
      color:var(--muted);
      font-size:14px;
    }

    .form-row{
      display:flex;
      gap:12px;
      margin-bottom:12px;
    }
    .form-row.column{flex-direction:column}
    label{
      display:block;
      font-size:13px;
      margin-bottom:6px;
      color:#111827;
    }
    input[type="number"], .unit-select{
      width:100%;
      padding:10px 12px;
      border-radius:8px;
      border:1px solid #e6e9ee;
      font-size:15px;
      background:white;
    }
    .unit-toggle{
      display:flex;
      gap:8px;
      align-items:center;
    }
    .unit-toggle button{
      padding:8px 10px;
      border-radius:8px;
      background:transparent;
      border:1px solid #e6e9ee;
      cursor:pointer;
      font-size:13px;
    }
    .unit-toggle button.active{
      background:var(--accent);
      color:white;
      border-color:var(--accent);
    }

    .actions{
      display:flex;
      gap:10px;
      margin-top:8px;
      align-items:center;
    }
    .btn{
      padding:10px 14px;
      border-radius:10px;
      border:0;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
    }
    .btn-primary{ background:var(--accent); color:white; box-shadow: 0 6px 14px rgba(74,144,226,0.18);}
    .btn-ghost{ background:transparent; border:1px solid #e6e9ee; color:#0f172a; }

    /* Result panel */
    .result{
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .bmi-value{
      font-size:34px;
      font-weight:700;
    }
    .bmi-category{
      font-size:15px;
      font-weight:700;
      padding:8px 12px;
      border-radius:999px;
      display:inline-block;
      color:white;
    }
    .info{ color:var(--muted); font-size:13px; }

    /* Visual scale */
    .scale{
      width:100%;
      height:14px;
      background: linear-gradient(90deg,#60a5fa 0% 25%, #34d399 25% 50%, #f59e0b 50% 75%, #ef4444 75% 100%);
      border-radius:8px;
      position:relative;
      margin-top:8px;
    }
    .scale .marker{
      position:absolute;
      top:-6px;
      width:2px;
      height:26px;
      background:#111827;
      border-radius:2px;
      transform:translateX(-50%);
      box-shadow:0 2px 6px rgba(0,0,0,0.12);
    }

    footer small{ color:var(--muted); }

    /* Accessibility focus */
    input:focus, button:focus { outline: 3px solid rgba(74,144,226,0.18); outline-offset:2px; }
  </style>
</head>
<body>
  <main class="container" role="main">
    <section class="card" aria-labelledby="title">
      <header>
        <h1 id="title">BMI Calculator</h1>
        <p>Enter weight and height, choose units, then press Calculate. This tool provides an approximate Body Mass Index (BMI) and a category.</p>
      </header>

      <form id="bmi-form" onsubmit="return false;" aria-describedby="desc">
        <div class="form-row">
          <div style="flex:1">
            <label for="weight">Weight</label>
            <input id="weight" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g. 70" aria-describedby="weight-help" required>
            <div id="weight-help" class="info">Enter your weight.</div>
          </div>
          <div style="width:140px">
            <label for="unit">Units</label>
            <div class="unit-toggle" role="group" aria-label="Unit toggle">
              <button type="button" class="unit-btn active" data-unit="metric" id="unit-metric" aria-pressed="true">kg / cm</button>
              <button type="button" class="unit-btn" data-unit="imperial" id="unit-imperial" aria-pressed="false">lb / in</button>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div style="flex:1">
            <label for="height">Height</label>
            <input id="height" type="number" inputmode="decimal" min="0" step="0.1" placeholder="e.g. 175" aria-describedby="height-help" required>
            <div id="height-help" class="info">Enter your height.</div>
          </div>
          <div style="width:140px" aria-hidden="true"></div>
        </div>

        <div class="actions">
          <button id="calc" class="btn btn-primary" type="button">Calculate BMI</button>
          <button id="clear" class="btn btn-ghost" type="button">Clear</button>
          <div style="flex:1"></div>
          <div class="info" id="desc">Results are estimates and do not replace medical advice.</div>
        </div>
      </form>
    </section>

    <aside class="card" aria-labelledby="result-title">
      <h2 id="result-title" style="margin:0 0 8px 0; font-size:16px;">Result</h2>
      <div class="result" id="result-area" aria-live="polite">
        <div>
          <div class="bmi-value" id="bmi-value">--</div>
          <div id="bmi-category" class="bmi-category" style="background:#9CA3AF">No data</div>
        </div>
        <div class="info" id="bmi-message">Please enter your weight and height, then click Calculate.</div>

        <div>
          <label style="display:block; margin-bottom:6px;">BMI Visual Scale</label>
          <div class="scale" aria-hidden="true" id="scale">
            <div class="marker" id="marker" style="left:0%"></div>
          </div>
          <div style="display:flex; justify-content:space-between; font-size:12px; margin-top:6px; color:var(--muted);">
            <span>Underweight</span>
            <span>Normal</span>
            <span>Overweight</span>
            <span>Obese</span>
          </div>
        </div>

        <div style="border-top:1px dashed #eef2f7; padding-top:10px;">
          <small>Body Mass Index (BMI) = weight (kg) / height (m)^2. For imperial units: BMI = 703 Ã— weight (lb) / height (in)^2</small>
        </div>
      </div>
    </aside>
  </main>

  <script>
    // All comments and UI text are in English.
    (function(){
      const unitButtons = document.querySelectorAll('.unit-btn');
      const weightInput = document.getElementById('weight');
      const heightInput = document.getElementById('height');
      const calcBtn = document.getElementById('calc');
      const clearBtn = document.getElementById('clear');
      const bmiValueEl = document.getElementById('bmi-value');
      const bmiCategoryEl = document.getElementById('bmi-category');
      const bmiMessageEl = document.getElementById('bmi-message');
      const marker = document.getElementById('marker');

      // Keep track of current unit: 'metric' or 'imperial'
      let currentUnit = 'metric';

      // Update placeholders according to unit
      function updatePlaceholders(){
        if(currentUnit === 'metric'){
          weightInput.placeholder = 'e.g. 70';
          heightInput.placeholder = 'e.g. 175';
          document.getElementById('weight-help').textContent = 'Weight in kilograms (kg).';
          document.getElementById('height-help').textContent = 'Height in centimeters (cm).';
        } else {
          weightInput.placeholder = 'e.g. 154';
          heightInput.placeholder = 'e.g. 69';
          document.getElementById('weight-help').textContent = 'Weight in pounds (lb).';
          document.getElementById('height-help').textContent = 'Height in inches (in).';
        }
      }

      // Unit toggle handlers
      unitButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          unitButtons.forEach(b => {
            b.classList.remove('active');
            b.setAttribute('aria-pressed','false');
          });
          btn.classList.add('active');
          btn.setAttribute('aria-pressed','true');
          currentUnit = btn.getAttribute('data-unit');
          updatePlaceholders();
          clearResult();
        });
      });

      // Clear fields and results
      function clearResult(){
        bmiValueEl.textContent = '--';
        bmiCategoryEl.textContent = 'No data';
        bmiCategoryEl.style.background = '#9CA3AF';
        bmiMessageEl.textContent = 'Please enter your weight and height, then click Calculate.';
        marker.style.left = '0%';
      }

      clearBtn.addEventListener('click', () => {
        weightInput.value = '';
        heightInput.value = '';
        clearResult();
        weightInput.focus();
      });

      // Validate inputs and compute BMI
      function computeBMI(){
        const weight = parseFloat(weightInput.value);
        const height = parseFloat(heightInput.value);

        if(!isFinite(weight) || weight <= 0){
          alert('Please enter a valid positive weight.');
          weightInput.focus();
          return;
        }
        if(!isFinite(height) || height <= 0){
          alert('Please enter a valid positive height.');
          heightInput.focus();
          return;
        }

        let bmi;
        if(currentUnit === 'metric'){
          // Convert cm to meters
          const heightM = height / 100;
          bmi = weight / (heightM * heightM);
        } else {
          // imperial: BMI = 703 * lb / in^2
          bmi = 703 * weight / (height * height);
        }
        const bmiRounded = Math.round(bmi * 10) / 10; // one decimal

        // Determine category using standard WHO thresholds
        const category = getBMICategory(bmi);

        // Update UI
        bmiValueEl.textContent = bmiRounded;
        bmiCategoryEl.textContent = category.label;
        bmiCategoryEl.style.background = category.color;
        bmiMessageEl.textContent = category.message;

        // Update visual marker position on scale
        setMarkerPosition(bmi);
      }

      // Map BMI to category, color, and suggestion
      function getBMICategory(bmi){
        // Categories and friendly labels similar to user's request (thin, chubby, etc.)
        if(bmi < 16){
          return { label: 'Severe Thinness', color: '#60a5fa', message: 'Very low BMI. Consult healthcare provider.' };
        } else if(bmi < 17){
          return { label: 'Moderate Thinness', color: '#3b82f6', message: 'Low BMI. Consider nutritional guidance.' };
        } else if(bmi < 18.5){
          return { label: 'Mild Thinness', color: '#2563eb', message: 'Slightly underweight. A balanced diet may help.' };
        } else if(bmi < 25){
          return { label: 'Normal weight', color: '#10b981', message: 'Healthy range. Maintain your lifestyle.' };
        } else if(bmi < 30){
          return { label: 'Overweight (Chubby)', color: '#f59e0b', message: 'Overweight. Consider diet and exercise.' };
        } else if(bmi < 35){
          return { label: 'Obesity Class I', color: '#f97316', message: 'Obese. Medical advice recommended.' };
        } else if(bmi < 40){
          return { label: 'Obesity Class II', color: '#ef4444', message: 'High obesity. Seek professional help.' };
        } else {
          return { label: 'Obesity Class III', color: '#b91c1c', message: 'Very high obesity. Urgent medical support advised.' };
        }
      }

      // Position marker on the scale from 0 to 50+ BMI (clamped)
      function setMarkerPosition(bmi){
        const min = 10; // left-most
        const max = 50; // right-most
        const clamped = Math.max(min, Math.min(max, bmi));
        const percent = ((clamped - min) / (max - min)) * 100;
        marker.style.left = percent + '%';
        marker.setAttribute('title', 'BMI marker: ' + (Math.round(bmi*10)/10));
      }

      // Event listeners
      calcBtn.addEventListener('click', computeBMI);

      // Allow Enter key in inputs to calculate
      [weightInput, heightInput].forEach(inp => {
        inp.addEventListener('keydown', (e) => {
          if(e.key === 'Enter'){
            e.preventDefault();
            computeBMI();
          }
        });
      });

      // Initialize placeholders and result
      updatePlaceholders();
      clearResult();

    })();
  </script>
</body>
</html>